---
title: 小程序的公共组件
date: 2018-05-08 16:34:33
categories:
    - Frontend
tags:
    - 小程序
---

项目里面多个页面都用到的模块可以抽出来做成组件复用，例如：自定义底部导航栏，页面loading动画等。这里以自定义导航栏为例。
[小程序组件](https://developers.weixin.qq.com/miniprogram/dev/component/)
<!-- more -->
&nbsp;

## 1、组件结构
组件的写法跟 `page` 没有任何区别，该怎么写就怎么写
```html
<!-- tabbar.wxml -->
<view class="component-tabbar">
  <view class="tabbar-index active" hover-class="hover-class" wx:if="{{ tabtype == 'index' }}"></view>
  <view class="tabbar-my" hover-class="hover-class"></view>
  <view class="tabbar-create" hover-class="hover-class"></view>
</view>

```
&nbsp;
```javascript
// tabbar.json
// json配置文件需要特别别注明这个page是一个组件
{
  "component": true,
  "usingComponents": {}
}
```
&nbsp;
```javascript
// tabbar.js
// js文件的注册方法跟page有区别，是Component，这里要注意
Component({
  /**
   * 组件的属性列表
   */
  properties: {
    // 传入的参数
    'tabtype': {
      type: 'string', // 参数类型
      value: 'index'  // 参数的值
    }
  },

  /**
   * 组件的初始数据
   */
  data: {

  },

  /**
   * 组件的方法列表
   */
  methods: {
    
  }
})
```
&nbsp;

## 2、在首页 `index` 引用 `tabbar` 组件
```html
<!-- index.wxml -->
<tabbar tabtype="index"></tabbar>
```
&nbsp;
```javascript
// index.json
// 配置里需要注明使用了组件及其路径
{
  "usingComponents": {
    "tabbar": "../../component/tabbar/tabbar"
  }
}
```
&nbsp;
